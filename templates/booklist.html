<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="{{ url_for('static', filename='css/styles.css') }}" rel="stylesheet">
 
  <style>
  * {
    box-sizing: border-box;
  }

	<title>Live A Thousand Lives / Books</title>	

	<style type="text/css">    

  table, th, td {
  border: 2px solid black;
  border-collapse: collapse;
  }
  table.center {
    margin-left: auto; 
    margin-right: auto;
    font-size: 2vw;
  }  

  body
  {
    text-align: center;
    font-family: sans-serif;
    font-size: 10vw;
  }


  /* Style the footer */
  .footer {
    background-color: #f1f1f1;
    padding:2vw;
    text-align: right;
    font-size: 4vw;
  }

  h1
  {
    font-size:10vw;
    color:rgb(20, 3, 104);
  }

  h2
  {
    font-size:8vw;
    font-style: italic;
    color:rgb(31, 4, 161);
  }

  </style>
  
  <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
  
</head>  
  
<body>
  <div class="topnav">
    <a href="/"><img src="static/home.png" alt="Home" style="width:4vw;height:auto;"></a>
    <a href="/liveathousandlives">Live 1000 Lives<img src="static/books.png" style="width:3vw;height:auto;"></a>
    <a href="/pictureoftheday">Photo</a>
    <a href="/quoteoftheday">Quote</a>
    <a href="/genwordoftheday">Word</a>
    <a href="/whatloveis">Love<img src="static/heart.png" style="width:3vw;height:auto;"></a>
  </div>

  <div id="main-div" class="content">
    <p><b>Books I Recommended on Twitter</b></p>
    <img id="load-prev-button-top" onclick="loadPrevBooks()" src="static/back-button.png" style="width:4vw;height:auto;"></a>
    <img id="load-next-button-top" onclick="loadNextBooks()" src="static/next-button.png" style="width:4vw;height:auto;"></a>
  </div>
  <div id="main-photo-div" class="content">
    {%- for book in booklist %}
    <blockquote class="twitter-tweet" data-conversation="none" align="center"><p lang="en" dir="ltr">...<a href="https://twitter.com/tothemax2050/status/{{ book }}">pic.twitter.com/jstcxC4t20</a></p>&mdash; Max (@tothemax2050) <a href="https://twitter.com/tothemax2050/status/{{ book }}?ref_src=twsrc%5Etfw">March 10, 2021</a></blockquote>
    {%- endfor %}
  </div>
  <div class="content">
    <img id="load-prev-button" onclick="loadPrevBooks()" src="static/back-button.png" style="width:4vw;height:auto;"></a>
    <img id="load-next-button" onclick="loadNextBooks()" src="static/next-button.png" style="width:4vw;height:auto;"></a>
  </div>

  <script>
    var ulElementMain = document.getElementById("main-div");
    var ulElementMainPhoto = document.getElementById("main-photo-div");
    var photo_index = 0;
    var photo_count = document.getElementById("main-photo-div").childElementCount;
    var ulElementMainPhotoClone = ulElementMainPhoto.cloneNode(true);
    ulElementMainPhoto.remove();
    for (let i = 0; i < 5; i++) {
      var clone = ulElementMainPhotoClone.children[i].cloneNode(true);
      ulElementMain.appendChild(clone);
    }
    photo_index += 5;
    ulElementMainPhoto.remove();
    document.getElementById("load-prev-button").style.visibility = 'hidden';
    document.getElementById("load-prev-button-top").style.visibility = 'hidden';
  </script>
  <script>
    function positionBackNextButtons()
    {
      document.getElementById("load-prev-button").style.visibility = 'visible';
      document.getElementById("load-next-button").style.visibility = 'visible';
      document.getElementById("load-prev-button-top").style.visibility = 'visible';
      document.getElementById("load-next-button-top").style.visibility = 'visible';

      if(photo_index <= 5)
      {
        document.getElementById("load-prev-button").style.visibility = 'hidden';
        document.getElementById("load-prev-button-top").style.visibility = 'hidden';
      }

      if(photo_index > photo_count)
      {
        document.getElementById("load-next-button").style.visibility = 'hidden';
        document.getElementById("load-next-button-top").style.visibility = 'hidden';
      }
      //scroll to top of the page
      scroll(0,0)
    }

    function appendScript() {
      var s = document.createElement('script');
      s.type = 'text/javascript';
      s.async = true;
      s.charset = "utf-8"
      s.src = "https://platform.twitter.com/widgets.js";
      ulElementMain.appendChild(s);
    }

    function loadNextBooks() {
      //remove all children except the first one
      while(ulElementMain.children[3]) {
        ulElementMain.children[3].remove()
      }
      var base = photo_index;
      for (let i = 0; i < 5 && (i+photo_index<photo_count); i++) {
        var clone = ulElementMainPhotoClone.children[base+i].cloneNode(true);
        ulElementMain.appendChild(clone);
      }
      photo_index += 5;
      appendScript();
      positionBackNextButtons();
    }

    function loadPrevBooks() {
      //remove all children except the first one
      while(ulElementMain.children[3]) {
        ulElementMain.children[3].remove()
      }
      var base = photo_index;
      for (let i = 0; i < 5 && (base-10)>=0; i++) {
        var clone = ulElementMainPhotoClone.children[base-10+i].cloneNode(true);
        ulElementMain.appendChild(clone);
      }
      photo_index -= 5;
      appendScript();
      positionBackNextButtons();
  }
  </script>

  <div class="content2">
    <p><b>More Books I Recommend - {{ count }} Books</b></p>
    <table id="booktable" class="center" border=1>
    </table>
  </div>

  <script>
    //tojson is a Jinja filter that dumps the structure to a JSON string and marks it safe 
    //so that Jinja does not autoescape it
    var columns = {{columns | tojson}} 
    var items = {{items | tojson}}
    var count = {{count | tojson}}
    var table = document.getElementById("booktable");
    // Create an empty <thead> element and add it to the table:
    var header = table.createTHead();
    // Create an empty <tr> element and add it to the first position of <thead>:
    var headrow = header.insertRow(0);
    for(let i = 0; i < columns.length; i++){ 
    // Insert a new cell (<td>) at the first position of the "new" <tr> element:
      let cell = headrow.insertCell(i);
      // Add some bold text in the new cell:
      cell.innerHTML = "<b>" + columns[i] + "</b>"; 
      if( columns[i] == "Date Finished" ) //do not change column[i] as it is used for dictionary lookup
        cell.innerHTML = "<b>" + "Date Read" + "</b>"; 
    }
    var body = table.createTBody();
    for(let i = 0; i < items.length; i++){ 
      // Create an empty <tr> element and add it to the 1st position of the table:
      let bodyrow = body.insertRow(i);
      for(let j = 0; j < columns.length; j++){ 
        // Insert new cells (<td> elements) at the 1st and 2nd position of the "new" <tr> element:
        let cell = bodyrow.insertCell(j);
        // Add some text to the new cells:
        let column = columns[j];
        cell.innerHTML = items[i][column];
      }
    }
  </script>

  <div class="botnav">
    <a href="/about"><img src="static/information.png" alt="About" style="width:4vw;height:auto;"></a>
    <a href="/#sub"><img src="static/subscribe.png" alt="Subscribe" style="width:4vw;height:auto;"></a>
    <a href="mailto:whereliteraturemeetscomputing@gmail.com"><img src="static/email.png" alt="Email" style="width:4vw;height:auto;"></a>
    <a href="https://twitter.com/tothemax2050"><img src="static/twitter.png" alt="Twitter" style="width:4vw;height:auto;"></a>
    <a href="https://www.facebook.com/wordsmartword"><img src="static/facebook.png" alt="Facebook" style="width:4vw;height:auto;"></a>
    <a href="https://www.instagram.com/tothemax2050"><img src="static/instagram.png" alt="Instagram" style="width:4vw;height:auto;"></a>
    <b style="color: white;font-family: Arial"><i>Where Literature Meets Computing!</i></b>
  </div>

</body>
</html>
